import 'package:hive/hive.dart';
import '../../model/address_model.dart';
import '../../../shared/storage/hive_storage.dart';

class LocalRepository {
  final Box<AddressModel> _box = HiveStorage.addressesBox;

  Future<void> save(AddressModel model) async {
    // guarda no final; use timestamp como key se preferir
    await _box.add(model);
  }

  List<AddressModel> getAll() {
    return _box.values.toList().reversed.toList(); // mostrar mais recente primeiro
  }

  AddressModel? getLast() {
    if (_box.isEmpty) return null;
    return _box.getAt(_box.length - 1);
  }

  Future<void> clearAll() async {
    await _box.clear();
  }
}
